---
id: 1y1z6
name: Checking Feature Flags
file_version: 1.0.2
app_version: 0.8.2-0
file_blobs:
  src/sentry/api/endpoints/project_details.py: 6bfda6938f954789b801c82be151114b3f159acb
  static/app/views/organizationGroupDetails/groupSimilarIssues/index.tsx: 10eabf2bfe38b3d877cf120fcb83f765be07636a
  static/app/components/createAlertButton.tsx: ae6144c41293ff3f5e38f60db191491f13a6908f
  src/sentry/features/__init__.py: 452694288e171760d79cf85636216f2a6b2a95df
---

### In Python code

The `FeatureManager`[<sup id="KmnaP">â†“</sup>](#f-KmnaP) 's `has`[<sup id="6xgVS">â†“</sup>](#f-6xgVS) method checks see if the feature exists. The `has`[<sup id="6xgVS">â†“</sup>](#f-6xgVS) method takes in the feature's name, the object that corresponds to the scope of the featureÂ _(i.e. an_ `organization`[<sup id="Z3NDuO">â†“</sup>](#f-Z3NDuO) _for an_ `organizations`[<sup id="27QmJq">â†“</sup>](#f-27QmJq) _level feature or a_ `project`[<sup id="2u7TVC">â†“</sup>](#f-2u7TVC) _for a_ `projects`[<sup id="ZThB63">â†“</sup>](#f-ZThB63) _level feature)_, and the `actor`[<sup id="Z1gObBk">â†“</sup>](#f-Z1gObBk) (aka `user`[<sup id="ZxgOaA">â†“</sup>](#f-ZxgOaA) ).

Note that when we give the feature to the frontend, we remove the scope prefix, and our `projects:custom-inbound-filters`[<sup id="Z2cAtv7">â†“</sup>](#f-Z2cAtv7) ,Â Â becomes `custom-inbound-filters`[<sup id="1LcALo">â†“</sup>](#f-1LcALo) .
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/sentry/api/endpoints/project_details.py
```python
â¬œ 702                if f"filters:{FilterTypes.RELEASES}" in options:
ðŸŸ© 703                    if features.has("projects:custom-inbound-filters", project, actor=request.user):
ðŸŸ© 704                        project.update_option(
ðŸŸ© 705                            f"sentry:{FilterTypes.RELEASES}",
ðŸŸ© 706                            clean_newline_inputs(options[f"filters:{FilterTypes.RELEASES}"]),
ðŸŸ© 707                        )
â¬œ 708                    else:
â¬œ 709                        return Response(
â¬œ 710                            {"detail": ["You do not have that feature enabled"]}, status=400
```

<br/>

### In JavaScript

There is a difference between using the flag in Sentry and in GetSentry. At this stage you're not quite ready to use your feature flag in GetSentry, but you are able to use it inside Sentry.

### Declarative features with the Feature component

React uses a declarative programming paradigm. As such, we have a utility component that we use to hide components based on the feature flags available to a organization/project.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ static/app/views/organizationGroupDetails/groupSimilarIssues/index.tsx
```tsx
â¬œ 3      import Feature from 'sentry/components/acl/feature';
â¬œ 4      
â¬œ 5      import SimilarStackTrace from './similarStackTrace';
â¬œ 6      
â¬œ 7      type Props = React.ComponentProps<typeof SimilarStackTrace>;
â¬œ 8      
ðŸŸ© 9      const GroupSimilarIssues = ({project, ...props}: Props) => (
ðŸŸ© 10       <Feature features={['similarity-view']} project={project}>
ðŸŸ© 11         <SimilarStackTrace project={project} {...props} />
ðŸŸ© 12       </Feature>
ðŸŸ© 13     );
â¬œ 14     
â¬œ 15     export default GroupSimilarIssues;
â¬œ 16     
```

<br/>

### Imperative feature flag checks

There are some exceptions when React components are generated imperatively (e.g. headers/columns for Tables). In difficult times like these, the Organization / Project object has an array of the feature flags, which you can use in this way:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ static/app/components/createAlertButton.tsx
```tsx
â¬œ 356        const createAlertUrl = (providedProj: string) => {
ðŸŸ© 357          const hasAlertWizardV3 = organization.features.includes('alert-wizard-v3');
â¬œ 358          const alertsBaseUrl = hasAlertWizardV3
â¬œ 359            ? `/organizations/${organization.slug}/alerts`
â¬œ 360            : `/organizations/${organization.slug}/alerts/${providedProj}`;
```

<br/>

### Flagr in development

In general, you do not need to run flagr in development to test your feature flagging. If you do want to run flagr, you'll need to be running getsentry:

1.  Set the environment variable: `export SENTRY_USE_FLAGR=true`
    
2.  Start your devservices.
    

Your local instance of flagr can be found at [localhost:18000](http://localhost:18000/#/)

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-Z1gObBk">actor</span>[^](#Z1gObBk) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-1LcALo">custom-inbound-filters</span>[^](#1LcALo) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-KmnaP">FeatureManager</span>[^](#KmnaP) - "src/sentry/features/__init__.py" L47
```python
default_manager = FeatureManager()  # NOQA
```

<span id="f-6xgVS">has</span>[^](#6xgVS) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-Z3NDuO">organization</span>[^](#Z3NDuO) - "src/sentry/api/endpoints/project_details.py" L217
```python
        has_sources = features.has("organizations:symbol-sources", organization, actor=request.user)
```

<span id="f-27QmJq">organizations</span>[^](#27QmJq) - "src/sentry/api/endpoints/project_details.py" L217
```python
        has_sources = features.has("organizations:symbol-sources", organization, actor=request.user)
```

<span id="f-2u7TVC">project</span>[^](#2u7TVC) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-ZThB63">projects</span>[^](#ZThB63) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-Z2cAtv7">projects:custom-inbound-filters</span>[^](#Z2cAtv7) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<span id="f-ZxgOaA">user</span>[^](#ZxgOaA) - "src/sentry/api/endpoints/project_details.py" L703
```python
                if features.has("projects:custom-inbound-filters", project, actor=request.user):
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBc2VudHJ5JTNBJTNBc3dpbW1pbw==/docs/1y1z6).