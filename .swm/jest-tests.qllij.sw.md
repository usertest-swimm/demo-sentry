---
id: qllij
name: Jest Tests
file_version: 1.0.2
app_version: 0.8.2-0
file_blobs:
  package.json: b1f7cd3b70c6ee83f363e94c8f2d4d08ed190da6
  tests/js/setup.ts: 27ccccec0f388c19bf5f8321a61503b8018590c8
  tests/js/spec/actionCreators/committers.spec.jsx: 76a0c759813cf656af4f61a7a48979b02bea01cd
---

Our Jest suite covers providing functional and unit testing for frontend components. We favour writing functional tests that interact with components and observe outcomes (navigation, API calls) over checking prop passing and state mutations.

<br/>

To run jest in interactive mode, use: `yarn`[<sup id="2j5fqg">â†“</sup>](#f-2j5fqg) `test`[<sup id="TFTmf">â†“</sup>](#f-TFTmf) .

To run a single test you can use:

`yarn test tests/js/spec/views/issueList/overview.spec.js`
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ package.json
```json
â¬œ 210      "scripts": {
â¬œ 211        "test-wrap": "node scripts/test.js",
ðŸŸ© 212        "test": "yarn test-wrap --watch",
â¬œ 213        "test-ci": "yarn test-wrap --ci --coverage --runInBand",
â¬œ 214        "test-debug": "node --inspect-brk scripts/test.js --runInBand",
â¬œ 215        "test-precommit": "yarn test-wrap --bail --findRelatedTests -u",
â¬œ 216        "test-staged": "yarn test-wrap --findRelatedTests $(git diff --name-only --cached)",
```

<br/>

### API Fixtures

<br/>

Because our Jest tests run without an API we have a variety of fixture builders available to help generate API response payloads. The `TestStubs`[<sup id="ZaB2AK">â†“</sup>](#f-ZaB2AK) global includes all the fixture functions in `ðŸ“„ tests/js/sentry-test`
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ tests/js/setup.ts
```typescript
â¬œ 235    /**
â¬œ 236     * Test Globals
â¬œ 237     */
â¬œ 238    declare global {
â¬œ 239      /**
â¬œ 240       * Test stubs are automatically loaded from the fixtures/js-stubs
â¬œ 241       * directory. Use these for setting up test data.
â¬œ 242       */
â¬œ 243      // eslint-disable-next-line no-var
ðŸŸ© 244      var TestStubs: TestStubTypes;
```

<br/>

You should also use `MockApiClient.addMockResponse`[<sup id="LnFpM">â†“</sup>](#f-LnFpM) to set responses for API calls your components will make. Failing to mock an endpoint will result in tests failing.

For example:
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ tests/js/spec/actionCreators/committers.spec.jsx
```javascript
â¬œ 24       beforeEach(() => {
â¬œ 25         MockApiClient.clearMockResponses();
ðŸŸ© 26         mockResponse = MockApiClient.addMockResponse({
ðŸŸ© 27           url: endpoint,
ðŸŸ© 28           body: mockData,
ðŸŸ© 29         });
â¬œ 30     
â¬œ 31         CommitterStore.init();
â¬œ 32     
```

<br/>

### Kafka Tests in CI

The Snuba test suite is the only test suite that will actually have Kafka running in CI. If you have a test that needs Kafka running then those tests need to be nested under the Snuba test folder ( `ðŸ“„ tests/snuba` ) If you don't, your tests will timeout and be cancelled in GH actions.

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-LnFpM">MockApiClient.addMockResponse</span>[^](#LnFpM) - "tests/js/spec/actionCreators/committers.spec.jsx" L26
```javascript
    mockResponse = MockApiClient.addMockResponse({
```

<span id="f-TFTmf">test</span>[^](#TFTmf) - "package.json" L211
```json
    "test-wrap": "node scripts/test.js",
```

<span id="f-ZaB2AK">TestStubs</span>[^](#ZaB2AK) - "tests/js/setup.ts" L244
```typescript
  var TestStubs: TestStubTypes;
```

<span id="f-2j5fqg">yarn</span>[^](#2j5fqg) - "package.json" L212
```json
    "test": "yarn test-wrap --watch",
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBc2VudHJ5JTNBJTNBc3dpbW1pbw==/docs/qllij).